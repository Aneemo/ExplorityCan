{% extends "base.html" %}

{% block title %}Edit Contact{% endblock %}

{% block content %}
    <h1>Edit Contact</h1>

    {% if contact %}
    <form action="{{ url_for('update_contact', contact_id=contact['id']) }}" method="POST" enctype="multipart/form-data" class="contact-form">
        <fieldset>
            <legend>Contact Information</legend>
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" value="{{ contact['name'] }}" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" value="{{ contact['email'] }}">
            </div>
            <div class="form-group">
                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone" value="{{ contact['phone'] }}">
            </div>
            <div class="form-group">
                <label for="interest">Interest:</label>
                <input type="text" id="interest" name="interest" value="{{ contact['interest'] }}">
            </div>
        </fieldset>

        <fieldset>
            <legend>Passport Details</legend>
            <div class="form-group">
                <label for="passport_number">Passport Number:</label>
                <input type="text" id="passport_number" name="passport_number" value="{{ contact['passport_number'] }}">
            </div>
            <div class="form-group">
                <label for="passport_file">Upload New Passport:</label>
                <input type="file" id="passport_file" name="passport_file">
                {% if contact.passport_filename %}
                <p class="current-file">Current file: <a href="{{ url_for('download_file', filename=contact.passport_filename) }}">{{ contact.passport_filename }}</a></p>
                {% endif %}
            </div>
        </fieldset>

        <fieldset>
            <legend>Driver's License Details</legend>
            <div class="form-group">
                <label for="drivers_license_number">Driver's License Number:</label>
                <input type="text" id="drivers_license_number" name="drivers_license_number" value="{{ contact['drivers_license_number'] }}">
            </div>
            <div class="form-group">
                <label for="drivers_license_file">Upload New Driver's License:</label>
                <input type="file" id="drivers_license_file" name="drivers_license_file">
                {% if contact.drivers_license_filename %}
                <p class="current-file">Current file: <a href="{{ url_for('download_file', filename=contact.drivers_license_filename) }}">{{ contact.drivers_license_filename }}</a></p>
                {% endif %}
            </div>
        </fieldset>

        <fieldset>
            <legend>Medicare Card Details</legend>
            <div class="form-group">
                <label for="medicare_number">Medicare Number:</label>
                <input type="text" id="medicare_number" name="medicare_number" value="{{ contact['medicare_number'] }}">
            </div>
            <div class="form-group">
                <label for="medicare_file">Upload New Medicare Card:</label>
                <input type="file" id="medicare_file" name="medicare_file">
                {% if contact.medicare_filename %}
                <p class="current-file">Current file: <a href="{{ url_for('download_file', filename=contact.medicare_filename) }}">{{ contact.medicare_filename }}</a></p>
                {% endif %}
            </div>
        </fieldset>

        <div class="form-actions">
            <button type="submit">Update Contact</button>
            <a href="{{ url_for('view_contact', contact_id=contact.id) }}" class="button-link cancel-link">Cancel</a>
        </div>
    </form>
    {% else %}
    <p>Contact not found.</p>
    <a href="{{ url_for('index') }}" class="button-link">Back to Home</a>
    {% endif %}
{% endblock %}