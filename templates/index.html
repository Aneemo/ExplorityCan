{% extends "base.html" %}

{% block title %}Contact Manager - Home{% endblock %}

{% block content %}
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>Contact Manager</h1>
        <a href="{{ url_for('add_contact') }}" class="button-link" style="margin-bottom: 20px;">Add New Contact</a>
    </div>

    <h2>Your Contacts</h2>
    {% if contacts %}
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Passport No.</th>
                <th>Driver's License</th>
                <th>Medicare No.</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for contact in contacts %}
            <tr>
                <td>{{ contact['name'] }}</td>
                <td>{{ contact['email'] }}</td>
                <td>{{ contact['phone'] }}</td>
                <td>
                    {{ contact['passport_number'] }}
                    {% if contact.passport_filename %}
                        <br><a href="{{ url_for('download_file', filename=contact.passport_filename) }}" class="file-download-link">Download</a>
                    {% endif %}
                </td>
                <td>
                    {{ contact['drivers_license_number'] }}
                    {% if contact.drivers_license_filename %}
                        <br><a href="{{ url_for('download_file', filename=contact.drivers_license_filename) }}" class="file-download-link">Download</a>
                    {% endif %}
                </td>
                <td>
                    {{ contact['medicare_number'] }}
                    {% if contact.medicare_filename %}
                        <br><a href="{{ url_for('download_file', filename=contact.medicare_filename) }}" class="file-download-link">Download</a>
                    {% endif %}
                </td>
                <td class="actions">
                    <a href="{{ url_for('edit_contact', contact_id=contact['id']) }}">Edit</a>
                    <form action="{{ url_for('delete_contact', contact_id=contact['id']) }}" method="POST" style="display:inline;">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this contact?');">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No contacts yet.</p>
    {% endif %}
{% endblock %}

